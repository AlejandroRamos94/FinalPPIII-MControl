<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
<script src="{{url_for('static', filename='js/songList.js')}}"></script>

<div class="row d-flex justify-content-md-center vh100">
    <div class="tablascr align-self-center">
      <table class="table table-dark table-hover tabla mt-2">
        <tbody class="tabla-body">
         <h4 class="d-flex justify-content-md-center text-light mt-2">Albums</h4>
        </tbody>       
            <!-- Playlist Item -->
          <!-- <div class="playlist-div imagediv">-->
              <!-- <div class="playlist-s">
                <span class="song-index">1</span>
                <td><p class="single-song text-light">Song one</p>
              </div></td>-->
            <!--</div>-->
            
      </table>
    </div>
  </div>

  <script>
        // playList
        //const sockets = io(); //conexion
       
        // Array to keep track of duplicate
        var dups = [];
        var arr = listSongs.filter(function(el) {
        // If it is not a duplicate, return true
        if (dups.indexOf(el.album) == -1) {
            dups.push(el.album);
            
            return true;
        }       
        return false;
        });
        //console.log(arr);
        
        function displayAlbum() {
        let artistName;
        sockets.on("message", (msg) => {
            artistName = msg;
            
            let counters = 1;
        let pDivvs = document.querySelector(".tabla-body");
        for (let i = 0; i < arr.length; i++) {
          if (arr[i].artista == artistName) {
            //console.log(arr[i].album);
           

            //let divv = document.createElement("tbody");
            let diva = document.createElement("tr");
            //div.classList.add("playlist-s");
            diva.classList.add("playlist-sr");
            diva.innerHTML = `
                <th class="song-index">${counters++}</th>
                <td class="single-song text-light" id="tdid"><a href="#" onclick="abrirUrl('/canciones','contenedorprincipal')">${arr[i].album}</a></td>
            `;
            pDivvs.appendChild(diva);
            
          }
            
          
        };send();
       
          });         
    };
    displayAlbum()
    function send(){
    $(".single-song").click(function() {
    var $items = $(this).closest("tr")   // Finds the closest row <tr> 
                       .find("#tdid")     // Gets a descendent with class="nr"
                       .text();         // Retrieves the text within <td>
    var albumName = $items;
    console.log(albumName);
    sockets.send(albumName);
    });
    }
  
 
  </script>